(function() { 'use strict';    const navToggle = document.querySelector('.nav-toggle'); const navMenu = document.querySelector('nav ul'); const navLinks = document.querySelectorAll('nav a');  if (navToggle) { navToggle.addEventListener('click', function() { navMenu.classList.toggle('open'); navToggle.setAttribute('aria-expanded', navMenu.classList.contains('open')); }); }  navLinks.forEach(link => { link.addEventListener('click', function() { navMenu.classList.remove('open'); if (navToggle) { navToggle.setAttribute('aria-expanded', 'false'); } }); });  document.addEventListener('keydown', function(event) { if (event.key === 'Escape' && navMenu.classList.contains('open')) { navMenu.classList.remove('open'); if (navToggle) { navToggle.setAttribute('aria-expanded', 'false'); } } });  const currentPage = window.location.pathname.split('/').pop() || 'index.html'; navLinks.forEach(link => { const href = link.getAttribute('href'); if (href === '/' && currentPage === 'index.html') { link.classList.add('active'); } else if (href === currentPage || href.includes(currentPage)) { link.classList.add('active'); } });    const faqHeaders = document.querySelectorAll('.faq-header'); faqHeaders.forEach(header => { header.addEventListener('click', function() { const item = this.parentElement; const isOpen = item.classList.contains('open');   document.querySelectorAll('.faq-item').forEach(faqItem => { faqItem.classList.remove('open'); });   if (!isOpen) { item.classList.add('open'); } }); });  faqHeaders.forEach((header, index) => { header.addEventListener('keydown', function(e) { if (e.key === 'ArrowDown') { e.preventDefault(); const nextHeader = faqHeaders[index + 1]; if (nextHeader) nextHeader.focus(); } else if (e.key === 'ArrowUp') { e.preventDefault(); const prevHeader = faqHeaders[index - 1]; if (prevHeader) prevHeader.focus(); } else if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); this.click(); } }); });    function animateCounter(element, target, duration = 2000) { const originalText = element.textContent; const isPercentage = originalText.includes('%'); const isSeconds = originalText.includes('s'); const isMultiplier = originalText.includes('x'); const hasPlus = originalText.includes('+'); const hasSlash = originalText.includes('/');  const start = 0; const increment = target / (duration / 16); let current = start; function update() { current += increment; if (current >= target) {  if (hasSlash) { element.textContent = target + '/5'; } else if (isPercentage) { element.textContent = target + '%'; } else if (isSeconds) { element.textContent = target + 's'; } else if (isMultiplier) { element.textContent = target + 'x'; } else if (hasPlus) { element.textContent = target.toLocaleString() + '+'; } else { element.textContent = target.toLocaleString(); } } else { const displayValue = Math.floor(current);  if (hasSlash) { element.textContent = displayValue + '/5'; } else if (isPercentage) { element.textContent = displayValue + '%'; } else if (isSeconds) { element.textContent = displayValue + 's'; } else if (isMultiplier) { element.textContent = displayValue + 'x'; } else if (hasPlus) { element.textContent = displayValue.toLocaleString() + '+'; } else { element.textContent = displayValue.toLocaleString(); } requestAnimationFrame(update); } } update(); }    const counters = document.querySelectorAll('[data-count]'); const observerOptions = { threshold: 0.5, rootMargin: '0px' }; const observer = new IntersectionObserver(function(entries) { entries.forEach(entry => { if (entry.isIntersecting && !entry.target.classList.contains('counted')) { const target = parseInt(entry.target.getAttribute('data-count')); animateCounter(entry.target, target, 2000); entry.target.classList.add('counted'); observer.unobserve(entry.target); } }); }, observerOptions); counters.forEach(counter => observer.observe(counter));    const auditCTAs = document.querySelectorAll('a[href="/audit.html"]'); auditCTAs.forEach(cta => {  cta.setAttribute('data-cta-type', 'audit');  cta.addEventListener('click', function(e) {  const ctaLocation = this.closest('section')?.className || 'unknown'; const ctaText = this.textContent.trim();   console.log('CTA Clicked:', { text: ctaText, location: ctaLocation, timestamp: new Date().toISOString() });  if (window.gtag) { gtag('event', 'cta_click', { 'cta_text': ctaText, 'cta_location': ctaLocation, 'page_path': window.location.pathname }); }   const originalOpacity = this.style.opacity; this.style.opacity = '0.8'; this.style.transform = 'scale(0.98)';  setTimeout(() => { this.style.opacity = originalOpacity; this.style.transform = 'scale(1)'; }, 150); });  cta.addEventListener('keydown', function(e) { if (e.key === 'Enter' || e.key === ' ') { this.click(); } }); });    document.querySelectorAll('a[href^="#"]').forEach(anchor => { anchor.addEventListener('click', function(e) { e.preventDefault(); const target = document.querySelector(this.getAttribute('href')); if (target) { target.scrollIntoView({ behavior: 'smooth', block: 'start' }); } }); });    const cards = document.querySelectorAll( '.card, .benefit-card, .case-study-card, .testimonial, .pricing-card, .process-step, .metric-card' );  const cardObserverOptions = { threshold: 0.1, rootMargin: '0px 0px -50px 0px' }; const cardObserver = new IntersectionObserver(function(entries) { entries.forEach(entry => { if (entry.isIntersecting) { entry.target.style.opacity = '1'; entry.target.style.transform = 'translateY(0)'; cardObserver.unobserve(entry.target); } }); }, cardObserverOptions); cards.forEach(card => { card.style.opacity = '0'; card.style.transform = 'translateY(20px)'; card.style.transition = 'opacity 0.6s ease, transform 0.6s ease'; cardObserver.observe(card); });    const buttons = document.querySelectorAll('.btn'); buttons.forEach(button => { button.addEventListener('mouseenter', function() { this.style.transition = 'all 0.3s cubic-bezier(0.2, 0.8, 0.2, 1)'; }); });    const forms = document.querySelectorAll('form'); forms.forEach(form => { form.addEventListener('submit', function(e) { const inputs = this.querySelectorAll('input[required], textarea[required]'); let isValid = true; inputs.forEach(input => { if (!input.value.trim()) { input.style.borderColor = '#ff6b6b'; isValid = false; } else { input.style.borderColor = ''; } }); if (!isValid) { e.preventDefault(); console.warn('Form validation failed'); } }); });    if ('IntersectionObserver' in window) { const imageObserver = new IntersectionObserver((entries, observer) => { entries.forEach(entry => { if (entry.isIntersecting) { const img = entry.target; img.src = img.dataset.src; img.classList.add('loaded'); observer.unobserve(img); } }); }); document.querySelectorAll('img[data-src]').forEach(img => imageObserver.observe(img)); }    if (window.performance && window.performance.timing) { window.addEventListener('load', function() { const perfData = window.performance.timing; const pageLoadTime = perfData.loadEventEnd - perfData.navigationStart; console.log('Page Load Time:', pageLoadTime + 'ms'); }); }    const skipLink = document.querySelector('.skip-link'); if (skipLink) { skipLink.addEventListener('click', function(e) { e.preventDefault(); const mainContent = document.querySelector('main') || document.querySelector('section'); if (mainContent) { mainContent.focus(); mainContent.scrollIntoView(); } }); }})();